<div class="px-4 sm:px-6 lg:px-8 py-16">
  <div class="sm:flex sm:items-center">
    <div class="sm:flex-auto">
      <h1 class="text-xl font-semibold text-gray-900">
        Newsletter Subscribers
      </h1>
      <p class="mt-2 text-sm text-gray-700">
        A list of all the subscribers </p>
    </div>
    <div class="mt-4 sm:mt-0 sm:ml-16 sm:flex-none">
      <button type="button" [routerLink]="['/subscribers/create']"
              class="inline-flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:w-auto">
        Add
        user
      </button>
    </div>
  </div>

  <div class="mt-8 flex flex-col">
    <div class="-my-2 -mx-4 overflow-x-auto sm:-mx-6 lg:-mx-8">
      <div class="inline-block min-w-full py-2 align-middle md:px-6 lg:px-8">

        <div class="relative overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
          <table class="min-w-full table-fixed divide-y divide-gray-300">
            <thead class="bg-gray-50">
            <tr>
              <th scope="col" class="relative w-12 px-6 sm:w-16 sm:px-8">

              </th>
              <th scope="col" class="min-w-[12rem] py-3.5 pr-3 text-left text-sm font-semibold text-gray-900">Name
              </th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Email</th>
              <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">Created On</th>
              <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                <span class="sr-only">Delete</span>
              </th>
            </tr>
            </thead>

            <tbody class="divide-y divide-gray-200 bg-white">
            <ng-container *ngIf="subscribers$ | async as data; else loadingOrError">
              <tr *ngFor="let x of data; let i = index">
                <td class="relative w-12 px-6 sm:w-16 sm:px-8">
                  <!-- Selected row marker, only show when row is selected. -->
                  <div class="absolute inset-y-0 left-0 w-0.5 bg-indigo-600"></div>
                  <input type="checkbox" class="absolute left-4 top-1/2 -mt-2 h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 sm:left-6">
                </td>
                <td class="whitespace-nowrap py-4 pr-3 text-sm font-medium text-gray-900">
                  {{ x.name | titlecase }}
                </td>
                <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
                  {{ x.email }}
                </td>
                <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">
                  {{ x.created_on | date }}
                </td>
                <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6">
                  <button (click)="deleteSubscriber(x.id)" class="text-red-500 hover:text-red-700">Delete</button>
                </td>
              </tr>
            </ng-container>
            </tbody>
            <!-- </ng-container> -->
          </table>
        </div>


        <ng-template #loadingOrError>
          <ng-container *ngIf="errorObject; else loading">
            <tr class="bg-red-100 border border-red-400 text-red-700 rounded relative w-full" role="alert">
              <td colspan="100%" class="px-4 py-3">
                <strong class="font-bold">Opps there was an error!</strong>
                <span class="block sm:inline">{{ errorObject.message }}</span>
                <span class="absolute top-0 bottom-0 right-0 px-4 py-3">
                <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 20 20">
                  <title>Close</title>
                  <path
                    d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                </svg>
              </span>
              </td>
            </tr>
          </ng-container>

          <ng-template #loading>
            <tr class="w-full text-center">
              <td colspan="100%" class="px-4 py-3">
                Loading...
              </td>
            </tr>
          </ng-template>
        </ng-template>

      </div>
    </div>
  </div>
</div>


